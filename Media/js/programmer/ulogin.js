!function(a,b,c,d){"undefined"==typeof a.easyXDM&&function(a,b,d,e,f,g){function h(a,b){var c=typeof a[b];return"function"==c||!("object"!=c||!a[b])||"unknown"==c}function i(){if(!p(c.plugins)&&"object"==typeof c.plugins["Shockwave Flash"]){var a=c.plugins["Shockwave Flash"].description;a&&!p(c.mimeTypes)&&c.mimeTypes["application/x-shockwave-flash"]&&c.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(H=a.match(/\d+/g))}if(!H){var b;try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),H=Array.prototype.slice.call(b.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1)}catch(d){}}return H?(a=parseInt(H[0],10),b=parseInt(H[1],10),I=a>9&&b>0,!0):!1}function j(){if(!L){L=!0;for(var a=0;a<M.length;a++)M[a]();M.length=0}}function k(a,b){L?a.call(b):M.push(function(){a.call(b)})}function l(){var a=parent;if(""!==B)for(var b=0,c=B.split(".");b<c.length;b++)a=a[c[b]];return a.easyXDM}function m(a){var b=a.toLowerCase().match(y);a=b[2];var c=b[3],b=b[4]||"";return("http:"==a&&":80"==b||"https:"==a&&":443"==b)&&(b=""),a+"//"+c+b}function n(a){if(a=a.replace(A,"$1/"),!a.match(/^(http||https):\/\//)){var b="/"===a.substring(0,1)?"":d.pathname;"/"!==b.substring(b.length-1)&&(b=b.substring(0,b.lastIndexOf("/")+1)),a=d.protocol+"//"+d.host+b+a}for(;z.test(a);)a=a.replace(z,"");return a}function o(a,b){var c="",d=a.indexOf("#");-1!==d&&(c=a.substring(d),a=a.substring(0,d));var e,d=[];for(e in b)b.hasOwnProperty(e)&&d.push(e+"="+g(b[e]));return a+(G?"#":-1==a.indexOf("?")?"?":"&")+d.join("&")+c}function p(a){return"undefined"==typeof a}function q(a,b,c){var d,e;for(e in b)b.hasOwnProperty(e)&&(e in a?(d=b[e],"object"==typeof d?q(a[e],d,c):c||(a[e]=b[e])):a[e]=b[e]);return a}function r(a){if(p(F)){var c=b.body.appendChild(b.createElement("form")),d=c.appendChild(b.createElement("input"));d.name=E+"TEST"+w,F=d!==c.elements[d.name],b.body.removeChild(c)}if(F?c=b.createElement('<iframe name="'+a.props.name+'"/>'):(c=b.createElement("IFRAME"),c.name=a.props.name),c.id=c.name=a.props.name,delete a.props.name,"string"==typeof a.container&&(a.container=b.getElementById(a.container)),a.container||(q(c.style,{position:"absolute",top:"-2000px",left:"0px"}),a.container=b.body),d=a.props.src,a.props.src="javascript:false",q(c,a.props),c.border=c.frameBorder=0,c.allowTransparency=!0,a.container.appendChild(c),a.onLoad&&J(c,"load",a.onLoad),a.usePost){var f,e=a.container.appendChild(b.createElement("form"));if(e.target=c.name,e.action=d,e.method="POST","object"==typeof a.usePost)for(var g in a.usePost)a.usePost.hasOwnProperty(g)&&(F?f=b.createElement('<input name="'+g+'"/>'):(f=b.createElement("INPUT"),f.name=g),f.value=a.usePost[g],e.appendChild(f));e.submit(),e.parentNode.removeChild(e)}else c.src=d;return a.props.src=d,c}function s(e){var g,f=e.protocol;if(e.isHost=e.isHost||p(P.xdm_p),G=e.hash||!1,e.props||(e.props={}),e.isHost)e.remote=n(e.remote),e.channel=e.channel||"default"+w++,e.secret=Math.random().toString(16).substring(2),p(f)&&(f=m(d.href)==m(e.remote)?"4":h(a,"postMessage")||h(b,"postMessage")?"1":e.swf&&h(a,"ActiveXObject")&&i()?"6":"Gecko"===c.product&&"frameElement"in a&&-1==c.userAgent.indexOf("WebKit")?"5":e.remoteHelper?"2":"0");else{e.channel=P.xdm_c.replace(/["'<>\\]/g,""),e.secret=P.xdm_s,e.remote=P.xdm_e.replace(/["'<>\\]/g,"");var j,f=P.xdm_p;if(j=e.acl){a:{j=e.acl;var k=e.remote;"string"==typeof j&&(j=[j]);for(var l,r=j.length;r--;)if(l=j[r],l=new RegExp("^"==l.substr(0,1)?l:"^"+l.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),l.test(k)){j=!0;break a}j=!1}j=!j}if(j)throw Error("Access denied for "+e.remote)}switch(e.protocol=f,f){case"0":if(q(e,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),e.isHost){if(!e.local){for(f=d.protocol+"//"+d.host,g=b.body.getElementsByTagName("img"),k=g.length;k--;)if(j=g[k],j.src.substring(0,f.length)===f){e.local=j.src;break}e.local||(e.local=a)}f={xdm_c:e.channel,xdm_p:0},e.local===a?(e.usePolling=!0,e.useParent=!0,e.local=d.protocol+"//"+d.host+d.pathname+d.search,f.xdm_e=e.local,f.xdm_pa=1):f.xdm_e=n(e.local),e.container&&(e.useResize=!1,f.xdm_po=1),e.remote=o(e.remote,f)}else q(e,{channel:P.xdm_c,remote:P.xdm_e,useParent:!p(P.xdm_pa),usePolling:!p(P.xdm_po),useResize:e.useParent?!1:e.useResize});g=[new C.stack.HashTransport(e),new C.stack.ReliableBehavior({}),new C.stack.QueueBehavior({encode:!0,maxLength:4e3-e.remote.length}),new C.stack.VerifyBehavior({initiate:e.isHost})];break;case"1":g=[new C.stack.PostMessageTransport(e)];break;case"2":e.isHost&&(e.remoteHelper=n(e.remoteHelper)),g=[new C.stack.NameTransport(e),new C.stack.QueueBehavior,new C.stack.VerifyBehavior({initiate:e.isHost})];break;case"3":g=[new C.stack.NixTransport(e)];break;case"4":g=[new C.stack.SameOriginTransport(e)];break;case"5":g=[new C.stack.FrameElementTransport(e)];break;case"6":H||i(),g=[new C.stack.FlashTransport(e)]}return g.push(new C.stack.QueueBehavior({lazy:e.lazy,remove:!0})),g}function t(a){for(var b,c={incoming:function(a,b){this.up.incoming(a,b)},outgoing:function(a,b){this.down.outgoing(a,b)},callback:function(a){this.up.callback(a)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},d=0,e=a.length;e>d;d++)b=a[d],q(b,c,!0),0!==d&&(b.down=a[d-1]),d!==e-1&&(b.up=a[d+1]);return b}function u(a){a.up.down=a.down,a.down.up=a.up,a.up=a.down=null}var F,H,I,J,K,v=this,w=Math.floor(1e4*Math.random()),x=Function.prototype,y=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,z=/[\-\w]+\/\.\.\//,A=/([^:])\/\//g,B="",C={},D=a.easyXDM,E="easyXDM_",G=!1;if(h(a,"addEventListener"))J=function(a,b,c){a.addEventListener(b,c,!1)},K=function(a,b,c){a.removeEventListener(b,c,!1)};else{if(!h(a,"attachEvent"))throw Error("Browser not supported");J=function(a,b,c){a.attachEvent("on"+b,c)},K=function(a,b,c){a.detachEvent("on"+b,c)}}var N,L=!1,M=[];if("readyState"in b?(N=b.readyState,L="complete"==N||~c.userAgent.indexOf("AppleWebKit/")&&("loaded"==N||"interactive"==N)):L=!!b.body,!L){if(h(a,"addEventListener"))J(b,"DOMContentLoaded",j);else if(J(b,"readystatechange",function(){"complete"==b.readyState&&j()}),b.documentElement.doScroll&&a===top){var O=function(){if(!L){try{b.documentElement.doScroll("left")}catch(a){return e(O,1),void 0}j()}};O()}J(a,"load",j)}var P=function(a){a=a.substring(1).split("&");for(var c,b={},d=a.length;d--;)c=a[d].split("="),b[c[0]]=f(c[1]);return b}(/xdm_e=/.test(d.search)?d.search:d.hash),Q=function(){var a={},b={a:[1,2,3]};return"undefined"!=typeof JSON&&"function"==typeof JSON.stringify&&'{"a":[1,2,3]}'===JSON.stringify(b).replace(/\s/g,"")?JSON:(Object.toJSON&&'{"a":[1,2,3]}'===Object.toJSON(b).replace(/\s/g,"")&&(a.stringify=Object.toJSON),"function"==typeof String.prototype.evalJSON&&(b='{"a":[1,2,3]}'.evalJSON(),b.a&&3===b.a.length&&3===b.a[2]&&(a.parse=function(a){return a.evalJSON()})),a.stringify&&a.parse?(Q=function(){return a},a):null)};q(C,{version:"2.4.19.0",query:P,stack:{},apply:q,getJSONObject:Q,whenReady:k,noConflict:function(b){return a.easyXDM=D,(B=b)&&(E="easyXDM_"+B.replace(".","_")+"_"),C}}),C.DomHelper={on:J,un:K,requiresJSON:function(c){"object"==typeof a.JSON&&a.JSON||b.write('<script type="text/javascript" src="'+c+'"></script>')}},function(){var a={};C.Fn={set:function(b,c){a[b]=c},get:function(b,c){if(a.hasOwnProperty(b)){var d=a[b];return c&&delete a[b],d}}}}(),C.Socket=function(a){var b=t(s(a).concat([{incoming:function(b,c){a.onMessage(b,c)},callback:function(b){a.onReady&&a.onReady(b)}}])),c=m(a.remote);this.origin=m(a.remote),this.destroy=function(){b.destroy()},this.postMessage=function(a){b.outgoing(a,c)},b.init()},C.Rpc=function(a,b){if(b.local)for(var c in b.local)if(b.local.hasOwnProperty(c)){var d=b.local[c];"function"==typeof d&&(b.local[c]={method:d})}var e=t(s(a).concat([new C.stack.RpcBehavior(this,b),{callback:function(b){a.onReady&&a.onReady(b)}}]));this.origin=m(a.remote),this.destroy=function(){e.destroy()},e.init()},C.stack.SameOriginTransport=function(a){var b,c,f,g;return b={outgoing:function(a,b,c){f(a),c&&c()},destroy:function(){c&&(c.parentNode.removeChild(c),c=null)},onDOMReady:function(){g=m(a.remote),a.isHost?(q(a.props,{src:o(a.remote,{xdm_e:d.protocol+"//"+d.host+d.pathname,xdm_c:a.channel,xdm_p:4}),name:E+a.channel+"_provider"}),c=r(a),C.Fn.set(a.channel,function(a){return f=a,e(function(){b.up.callback(!0)},0),function(a){b.up.incoming(a,g)}})):(f=l().Fn.get(a.channel)(function(a){b.up.incoming(a,g)}),e(function(){b.up.callback(!0)},0))},init:function(){k(b.onDOMReady,b)}}},C.stack.FlashTransport=function(a){function c(a){e(function(){h.up.incoming(a,j)},0)}function f(c){var d=a.swf+"?host="+a.isHost,e="easyXDM_swf_"+Math.floor(1e4*Math.random());C.Fn.set("flash_loaded"+c.replace(/[\-.]/g,"_"),function(){C.stack.FlashTransport[c].swf=l=p.firstChild;for(var a=C.stack.FlashTransport[c].queue,b=0;b<a.length;b++)a[b]();a.length=0}),a.swfContainer?p="string"==typeof a.swfContainer?b.getElementById(a.swfContainer):a.swfContainer:(p=b.createElement("div"),q(p.style,I&&a.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),b.body.appendChild(p));var f="callback=flash_loaded"+g(c.replace(/[\-.]/g,"_"))+"&proto="+v.location.protocol+"&domain="+g(v.location.href.match(y)[3])+"&port="+g(v.location.href.match(y)[4]||"")+"&ns="+g(B);p.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+e+"' data='"+d+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+d+"'></param><param name='flashvars' value='"+f+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+f+"' allowScriptAccess='always' wmode='transparent' src='"+d+"' height='1' width='1'></embed></object>"}var h,i,j,l,p;return h={outgoing:function(b,c,d){l.postMessage(a.channel,b.toString()),d&&d()},destroy:function(){try{l.destroyChannel(a.channel)}catch(b){}l=null,i&&(i.parentNode.removeChild(i),i=null)},onDOMReady:function(){j=a.remote,C.Fn.set("flash_"+a.channel+"_init",function(){e(function(){h.up.callback(!0)})}),C.Fn.set("flash_"+a.channel+"_onMessage",c),a.swf=n(a.swf);var b=a.swf.match(y)[3],g=function(){C.stack.FlashTransport[b].init=!0,l=C.stack.FlashTransport[b].swf,l.createChannel(a.channel,a.secret,m(a.remote),a.isHost),a.isHost&&(I&&a.swfNoThrottle&&q(a.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),q(a.props,{src:o(a.remote,{xdm_e:m(d.href),xdm_c:a.channel,xdm_p:6,xdm_s:a.secret}),name:E+a.channel+"_provider"}),i=r(a))};C.stack.FlashTransport[b]&&C.stack.FlashTransport[b].init?g():C.stack.FlashTransport[b]?C.stack.FlashTransport[b].queue.push(g):(C.stack.FlashTransport[b]={queue:[g]},f(b))},init:function(){k(h.onDOMReady,h)}}},C.stack.PostMessageTransport=function(b){function c(a){var c;if(a.origin)c=m(a.origin);else if(a.uri)c=m(a.uri);else{if(!a.domain)throw"Unable to retrieve the origin of the event";c=d.protocol+"//"+a.domain}c==i&&a.data.substring(0,b.channel.length+1)==b.channel+" "&&f.up.incoming(a.data.substring(b.channel.length+1),c)}var f,g,h,i;return f={outgoing:function(a,c,d){h.postMessage(b.channel+" "+a,c||i),d&&d()},destroy:function(){K(a,"message",c),g&&(h=null,g.parentNode.removeChild(g),g=null)},onDOMReady:function(){if(i=m(b.remote),b.isHost){var j=function(d){d.data==b.channel+"-ready"&&(h="postMessage"in g.contentWindow?g.contentWindow:g.contentWindow.document,K(a,"message",j),J(a,"message",c),e(function(){f.up.callback(!0)},0))};J(a,"message",j),q(b.props,{src:o(b.remote,{xdm_e:m(d.href),xdm_c:b.channel,xdm_p:1}),name:E+b.channel+"_provider"}),g=r(b)}else J(a,"message",c),h="postMessage"in a.parent?a.parent:a.parent.document,h.postMessage(b.channel+"-ready",i),e(function(){f.up.callback(!0)},0)},init:function(){k(f.onDOMReady,f)}}},C.stack.FrameElementTransport=function(c){var f,g,h,i;return f={outgoing:function(a,b,c){h.call(this,a),c&&c()},destroy:function(){g&&(g.parentNode.removeChild(g),g=null)},onDOMReady:function(){i=m(c.remote),c.isHost?(q(c.props,{src:o(c.remote,{xdm_e:m(d.href),xdm_c:c.channel,xdm_p:5}),name:E+c.channel+"_provider"}),g=r(c),g.fn=function(a){return delete g.fn,h=a,e(function(){f.up.callback(!0)},0),function(a){f.up.incoming(a,i)}}):(b.referrer&&m(b.referrer)!=P.xdm_e&&(a.top.location=P.xdm_e),h=a.frameElement.fn(function(a){f.up.incoming(a,i)}),f.up.callback(!0))},init:function(){k(f.onDOMReady,f)}}},C.stack.NameTransport=function(a){function b(b){i.contentWindow.sendMessage(b,a.remoteHelper+(h?"#_3":"#_2")+a.channel)}function c(){h?2!==++l&&h||g.up.callback(!0):(b("ready"),g.up.callback(!0))}function d(a){g.up.incoming(a,s)}function f(){p&&e(function(){p(!0)},0)}var g,h,i,j,l,p,s,t;return g={outgoing:function(a,c,d){p=d,b(a)},destroy:function(){i.parentNode.removeChild(i),i=null,h&&(j.parentNode.removeChild(j),j=null)},onDOMReady:function(){h=a.isHost,l=0,s=m(a.remote),a.local=n(a.local),h?(C.Fn.set(a.channel,function(b){h&&"ready"===b&&(C.Fn.set(a.channel,d),c())}),t=o(a.remote,{xdm_e:a.local,xdm_c:a.channel,xdm_p:2}),q(a.props,{src:t+"#"+a.channel,name:E+a.channel+"_provider"}),j=r(a)):(a.remoteHelper=a.remote,C.Fn.set(a.channel,d));var b=function(){var d=i||this;K(d,"load",b),C.Fn.set(a.channel+"_load",f),function g(){"function"==typeof d.contentWindow.sendMessage?c():e(g,50)}()};i=r({props:{src:a.local+"#_4"+a.channel},onLoad:b})},init:function(){k(g.onDOMReady,g)}}},C.stack.HashTransport=function(b){function c(){if(l){var a=l.location.href,b="",c=a.indexOf("#");-1!=c&&(b=a.substring(c)),b&&b!=i&&(i=b,d.up.incoming(i.substring(i.indexOf("_")+1),p))}}var d,f,g,h,i,j,l,n,o,p;return d={outgoing:function(a){if(n){var d=b.remote+"#"+j++ +"_"+a;(f||!o?n.contentWindow:n).location=d}},destroy:function(){a.clearInterval(g),!f&&o||n.parentNode.removeChild(n),n=null},onDOMReady:function(){if(f=b.isHost,h=b.interval,i="#"+b.channel,j=0,o=b.useParent,p=m(b.remote),f){if(q(b.props,{src:b.remote,name:E+b.channel+"_provider"}),o)b.onLoad=function(){l=a,g=setInterval(c,h),d.up.callback(!0)};else{var k=0,s=b.delay/50;!function t(){if(++k>s)throw Error("Unable to reference listenerwindow");try{l=n.contentWindow.frames[E+b.channel+"_consumer"]}catch(a){}l?(g=setInterval(c,h),d.up.callback(!0)):e(t,50)}()}n=r(b)}else l=a,g=setInterval(c,h),o?(n=parent,d.up.callback(!0)):(q(b,{props:{src:b.remote+"#"+b.channel+new Date,name:E+b.channel+"_consumer"},onLoad:function(){d.up.callback(!0)}}),n=r(b))},init:function(){k(d.onDOMReady,d)}}},C.stack.ReliableBehavior=function(){var b,c,d=0,e=0,f="";return b={incoming:function(a,g){var h=a.indexOf("_"),i=a.substring(0,h).split(",");a=a.substring(h+1),i[0]==d&&(f="",c&&c(!0)),0<a.length&&(b.down.outgoing(i[1]+","+d+"_"+f,g),e!=i[1]&&(e=i[1],b.up.incoming(a,g)))},outgoing:function(a,g,h){f=a,c=h,b.down.outgoing(e+","+ ++d+"_"+a,g)}}},C.stack.QueueBehavior=function(a){function b(){if(a.remove&&0===d.length)u(c);else if(!h&&0!==d.length&&!j){h=!0;var f=d.shift();c.down.outgoing(f.data,f.origin,function(a){h=!1,f.callback&&e(function(){f.callback(a)},0),b()})}}var c,j,d=[],h=!0,i="",k=0,l=!1,m=!1;return c={init:function(){p(a)&&(a={}),a.maxLength&&(k=a.maxLength,m=!0),a.lazy?l=!0:c.down.init()},callback:function(a){h=!1;var d=c.up;b(),d.callback(a)},incoming:function(b,d){if(m){var e=b.indexOf("_"),g=parseInt(b.substring(0,e),10);i+=b.substring(e+1),0===g&&(a.encode&&(i=f(i)),c.up.incoming(i,d),i="")}else c.up.incoming(b,d)},outgoing:function(e,f,h){a.encode&&(e=g(e));var j,i=[];if(m){for(;0!==e.length;)j=e.substring(0,k),e=e.substring(j.length),i.push(j);for(;j=i.shift();)d.push({data:i.length+"_"+j,origin:f,callback:0===i.length?h:null})}else d.push({data:e,origin:f,callback:h});l?c.down.init():b()},destroy:function(){j=!0,c.down.destroy()}}},C.stack.VerifyBehavior=function(a){function b(){d=Math.random().toString(16).substring(2),c.down.outgoing(d)}var c,d,e;return c={incoming:function(f,g){var h=f.indexOf("_");-1===h?f===d?c.up.callback(!0):e||(e=f,a.initiate||b(),c.down.outgoing(f)):f.substring(0,h)===e&&c.up.incoming(f.substring(h+1),g)},outgoing:function(a,b,e){c.down.outgoing(d+"_"+a,b,e)},callback:function(){a.initiate&&b()}}},C.stack.RpcBehavior=function(a,b){function c(a){a.jsonrpc="2.0",f.down.outgoing(g.stringify(a))}function d(a,b){var d=Array.prototype.slice;return function(){var f,e=arguments.length,g={method:b};e>0&&"function"==typeof arguments[e-1]?(e>1&&"function"==typeof arguments[e-2]?(f={success:arguments[e-2],error:arguments[e-1]},g.params=d.call(arguments,0,e-2)):(f={success:arguments[e-1]},g.params=d.call(arguments,0,e-1)),i[""+ ++h]=f,g.id=h):g.params=d.call(arguments,0),a.namedParams&&1===g.params.length&&(g.params=g.params[0]),c(g)}}function e(a,b,d,e){if(d){var f,g;b?(f=function(a){f=x,c({id:b,result:a})},g=function(a,d){g=x;var e={id:b,error:{code:-32099,message:a}};d&&(e.error.data=d),c(e)}):f=g=x,"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]);try{var h=d.method.apply(d.scope,e.concat([f,g]));p(h)||f(h)}catch(i){g(i.message)}}else b&&c({id:b,error:{code:-32601,message:"Procedure not found."}})}var f,g=b.serializer||Q(),h=0,i={};return f={incoming:function(a){var f=g.parse(a);if(f.method)b.handle?b.handle(f,c):e(f.method,f.id,b.local[f.method],f.params);else{var h=i[f.id];f.error?h.error&&h.error(f.error):h.success&&h.success(f.result),delete i[f.id]}},init:function(){if(b.remote)for(var c in b.remote)b.remote.hasOwnProperty(c)&&(a[c]=d(b.remote[c],c));f.down.init()},destroy:function(){for(var c in b.remote)b.remote.hasOwnProperty(c)&&a.hasOwnProperty(c)&&delete a[c];f.down.destroy()}}},v.easyXDM=C}(a,b,location,a.setTimeout,decodeURIComponent,encodeURIComponent),"undefined"!=typeof a.uLogin&&a.uLogin.uLoginHost||(Array.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"undefined"==typeof a.console&&(a.console={log:function(){},error:function(){},info:function(){},assert:function(){}}),a.uLogin={uLoginHost:function(){return"ulogin.ru"}(b.getElementsByTagName("script"))},a.uLogin={protocol:location.href.match(/^https/i)?"https":"http",host:encodeURIComponent(location.host),uLoginHost:uLogin.uLoginHost,supportStorage:!!("localStorage"in window&&null!==window.localStorage&&"JSON"in window&&null!==window.JSON&&"undefined"!=typeof window.JSON.parse&&"undefined"!=typeof window.JSON.stringify),ids:[],timeouts:{},listeners:{},lang:(c.language||c.systemLanguage||c.userLanguage||"en").substr(0,2).toLowerCase(),langs:"en ru uk fr de uz".split(" "),dialog:!1,close:!1,lightbox:!1,dialogSocket:!1,pixel:"//"+uLogin.uLoginHost+"/match?rand=[rand]&u=[u]&r=[r]",providerCodes:"vkontakte odnoklassniki mailru facebook twitter google yandex livejournal openid flickr lastfm linkedin liveid soundcloud steam uid webmoney youtube foursquare tumblr googleplus dudu vimeo instagram wargaming".split(" "),providerNames:"VK Odnoklassniki Mail.ru Facebook Twitter Google Yandex LiveJournal OpenID Flickr Last.FM LinkedIn LiveID SoundCloud Steam uID WebMoney YouTube foursquare tumblr Google+ dudu Vimeo Instagram Wargaming.net".split(" "),states:["ready","receive","open","close"],widgetSettings:{},findTimer:0,waitGetWidget:{},rc:!1,altway:function(a){return a=a.toLowerCase(),!!/(iPhone|iPad)(.*?)(chrome|crios|IE Mobile|UCWEB)/i.test(a)}(c.userAgent||c.vendor||a.opera),mobile:function(a){return a=a.toLowerCase(),!(!/(ip(ad|od|hone)|android)/i.test(a)||/(crios|Chrome)/i.test(a)||!/(Opera|Apple|Safari)/i.test(a))}(c.userAgent||c.vendor||a.opera),get:function(a){return b.getElementById(a)},exists:function(a){return"undefined"!=typeof a},add:function(a,b,c){a.addEventListener?a.addEventListener(b,function(b){c(a,b)},!1):a.attachEvent?a.attachEvent("on"+b,function(b){c(a,b)}):a["on"+b]=function(b){c(a,b)}},is_encoded:function(a){return decodeURIComponent(a)!=a},genID:function(){for(var a=new Date,b=a.getTime()+Math.floor(1e5*Math.random());this.get("ul_"+b);)b=a.getTime()+Math.floor(1e5*Math.random());return"ul_"+b},show:function(a){this.exists(a)&&(a.style.display="block")},hide:function(a){a&&this.exists(a)&&(a.style.display="none")},parse:function(a){var b={};if(!a)return b;var c=a.split("&"),c=1<c.length?c:a.split(";");for(a=0;a<c.length;a++){var d=c[a].split("=");d[0]&&(d[0]=d[0].trim()),d[1]&&(d[1]=d[1].trim()),b[d[0]]=d[1]}return b},scrollTop:function(){return a.pageYOffset||b.documentElement.scrollTop||b.body.scrollTop},scrollLeft:function(){return a.pageXOffset||b.documentElement.scrollLeft||b.body.scrollLeft},dialogHeight:function(){return 358},dialogWidth:function(){return 564},clientWidth:function(){var c=0;return"[object Opera]"==Object.prototype.toString.call(a.opera)&&9.5>a.parseFloat(a.opera.version())?c=b.body.clientWidth:a.innerWidth&&(c=a.innerWidth),this.isIE()&&(c=b.documentElement.clientWidth),c},clientHeight:function(){var c=0;return"[object Opera]"==Object.prototype.toString.call(a.opera)&&9.5>a.parseFloat(a.opera.version())?c=b.body.clientHeight:a.innerHeight&&(c=a.innerHeight),this.isIE()&&(c=b.documentElement.clientHeight),c},isIE:function(){if(/MSIE (\d+\.\d+);/.test(c.userAgent)){var a=Number(RegExp.$1);if(9>a)return a}return!1},inArray:function(a,b){if(!a||!b)return!1;for(var c=0,d=b.length;d>c;c++)if(a==b[c])return c;return-1},findWidgets:function(){for(var a=0,c=[],d=[],e=b.getElementsByTagName("div"),f=b.getElementsByTagName("a");f[a];)f[a]&&(c[a]=f[a]),a++;for(a=0;e[a];)e[a]&&(d[a]=e[a]),a++;for(a=0;d[a]||c[a];)d[a]&&this.addWidget(d[a]),c[a]&&this.addWidget(c[a]),a++},addWidget:function(a){var b=a.id,c=a.getAttribute("data-ulogin")||a.getAttribute("x-ulogin-params"),d=a.getAttribute("data-uloginid");!d&&!c||b||(b=this.genID(),a.setAttribute("id",b)),d?this.getWidget(d,b):c&&this.setProp(b,this.ids.length,this.parse(c))},inited:function(a){for(var b=0;b<this.ids.length;b++)if(a==this.ids[b].id)return!0;return!1},initWidget:function(a){if(a){var b=this.get(a);if(b&&(b=b.getAttribute("data-ulogin")||b.getAttribute("x-ulogin-params"))&&!this.inited(a)){var b=this.parse(b),c=this.getWidgetNumber(a);isNaN(c)?c=this.ids.length:this.ids[c]={},this.setProp(a,c,b)}}},setProp:function(a,b,c){if(this.inited(a))return!1;switch(this.ids[b]={id:a,dropTimer:!1,initCheck:!1,type:c.display||"",providers:c.providers||"",hidden:c.hidden||"",redirect_uri:c.redirect_uri||"",callback:c.callback||"",fields:c.fields||"first_name,last_name",optional:c.optional||"",color:c.color||"fff",opacity:c.opacity||"75",verify:c.verify||"",lang:c.lang||this.lang,altway:c.altway||this.altway,sort:"default"===c.sort?"default":"relevant",state:"",hidden_button:c.hidden_button||"outer"},this.ids[b].providers||this.ids[b].other||(this.ids[b].hidden="other"),"small"!==this.ids[b].type&&"panel"!==this.ids[b].type||this.sendStats({type:this.ids[b].type}),"window"==this.ids[b].type&&!this.ids[b].providers&&this.ids[b].hidden&&(this.ids[b].providers=this.providerCodes.join(",")),this.ids[b].mobile=0==c.mobilebuttons?0:this.mobile,this.ids[b].altway&&(this.ids[b].redirect_uri||(this.ids[b].redirect_uri=location.href),this.ids[b].callback=""),this.ids[b].redirect_uri=this.is_encoded(this.ids[b].redirect_uri)?this.ids[b].redirect_uri.replace(/\//g,"%2F").replace(/\?/g,"%3F"):encodeURIComponent(this.ids[b].redirect_uri),this.ids[b].callback&&(this.ids[b].redirect_uri=""),-1==this.inArray(this.ids[b].lang,this.langs)&&(this.ids[b].lang=this.lang),c.display){case"small":case"panel":this.ids[b].listener_id=!1,this.initPanel(b);break;case"window":this.initWindow(b);break;case"buttons":this.initButtons(b);break;default:this.ids.splice(b,b)}this.get(a).setAttribute("data-ulogin-inited",(+new Date).toString())},initPanel:function(a){var h,c=this.get(this.ids[a].id),d="small"==this.ids[a].type?1:0,e=d?21:42,f=d?16:32,g=0;if("url("+this.buildUrl("img/"+(d?"small.png?version=1.5.00":"panel.png?version=1.5.00"))+") "+(d?"0 0":"0 -3px")+" no-repeat",c.innerHTML="","other"===this.ids[a].hidden){if(h=this.providerCodes.slice(0),this.ids[a].providers)for(var k=this.ids[a].providers.split(","),l=0;l<k.length;l++){var m=this.inArray(k[l],h);-1!==m&&h.splice(m,1)}this.ids[a].hidden=h.toString()}if(this.ids[a].providers){var n,k="relevant"===this.ids[a].sort?this.relProviders(this.ids[a].providers,this.ids[a].hidden,1):this.ids[a].providers.split(","),g=g+e*("inset"===this.ids[a].hidden_button?k.length+1:k.length),e=b.createElement("div");this.ids[a].buttonsContainer=e,this.resetStyle(e,{height:f,display:"inline-block"}),c.appendChild(e);for(n in k)g=k[n],h=this.inArray(g,this.providerCodes),h>-1&&(e=b.createElement("button"),e.setAttribute("data-uloginbutton",g),e.setAttribute("class",g),e.setAttribute("title",this.providerNames[h]),this.ids[a].buttonsContainer.appendChild(e))}this.ids[a].hidden&&(c.style.position="relative","relevant"===this.ids[a].sort&&(this.ids[a].hidden=this.relProviders(this.ids[a].providers,this.ids[a].hidden,2).join(",")),this.ids[a].drop=b.createElement("img"),this.ids[a].drop.src=this.buildUrl("img/blank.gif"),this.add(this.ids[a].drop,"mouseover",function(b){uLogin.ids[a].showed=!1,uLogin.dropdownDelayed(a,d?1:2),uLogin.setOpacity(b,uLogin.ids[a].opacity)}),this.add(this.ids[a].drop,"mouseout",function(b){uLogin.ids[a].showed=!0,uLogin.dropdownDelayed(a,0),uLogin.setOpacity(b)}),this.add(this.ids[a].drop,"click",function(){uLogin.dropdown(a,d?1:2)}),"inset"===this.ids[a].hidden_button?this.ids[a].buttonsContainer.appendChild(this.ids[a].drop):c.appendChild(this.ids[a].drop),this.initDrop(a)),this.initButtons(a)},initWindow:function(a){var b=this.get(this.ids[a].id),c=b.getElementsByTagName("*");c.length?b=c[0]:(c=document.createElement("span"),c.innerHTML=b.innerHTML,b.innerHTML="",b=b.appendChild(c)),b.setAttribute("data-uloginbutton","window"),b.setAttribute("data-ulogin-default","true"),this.ids[a].opacity=75,this.initButtons(a)},sendPixel:function(){if(this.getRC(),this.pixel){var a=b.createElement("iframe"),c=this.getRC();a.src=this.pixel.replace("[rand]",parseInt(1e5*Math.random())).replace("[u]",encodeURIComponent(location.href)).replace("[r]",encodeURIComponent(b.referrer||"")),a.width=a.height=1,a.style.display="none",c.appendChild(a),d(function(){c.removeChild(a)},3e3),this.pixel=!1}},sendStats:function(){},mergeAccounts:function(a,b){if(!a)return console.error('uLogin ERROR (mergeAccounts): invalid token "'+a+'"'),!1;var c={token:a};b?("undefined"!=typeof b.join&&(b=b.join(",")),c.identities=encodeURIComponent(b),c=this.buildUrl("merge_accounts.php",c)):c=this.buildUrl("require_verify.php",c),this.loadWindow(c)},getRC:function(){return this.rc||(this.rc=b.createElement("div"),this.rc.setAttribute("id","ulogin_receiver_container"),this.resetStyle(this.rc,{width:0,height:0,display:"none"}),b.getElementsByTagName("body")[0].appendChild(this.rc)),this.rc},clearTimeouts:function(){for(var a in this.timeouts)clearTimeout(this.timeouts[a])},init:function(a){if(b.body){if(""==a&&(a=b.getElementsByTagName("script"),a=a[a.length-1].src,-1==a.indexOf("?")&&(a+="?"),a=a.substr(a.indexOf("?")+1)),""!=a){var c=this.parse(a);if(c.display){var e=c.id||"uLogin";if(this.get(e)){a=!0;for(var f=0;f<this.ids.length;f++)e==this.ids[f].id&&(a=!1);a&&this.setProp(c.id||"uLogin",this.ids.length,c)}else d('uLogin.init("'+a+'")',1e3)}}uLogin.timeouts.search_all=d(function(){return uLogin.findWidgets(),"complete"===b.readyState&&(0===uLogin.findTimer&&(uLogin.findTimer=+new Date),1e4<new Date-uLogin.findTimer)?!1:(uLogin.timeouts.all=d(arguments.callee,50),void 0)},50),this.findWidgets(),uLogin.timeouts.search_ulogin=d(function(){uLogin.checkAsyncWidgets(),uLogin.timeouts.search_ulogin=d(arguments.callee,50)},50),this.checkAsyncWidgets(),uLogin.timeouts.check_widgets=d(function(){uLogin.checkCurrentWidgets(),uLogin.timeouts.check_widgets=d(arguments.callee,300)},30),this.checkCurrentWidgets(),this.sendPixel()}else d(function(){uLogin.init()},20)},newDialogSocket:function(a){this.dialogSocket&&this.dialogSocket.destroy(),this.dialogSocket=a},initSocket:function(b,c,d,e){e||(e=0);var f=new easyXDM.Socket({remote:b,swf:this.isIE()?this.buildUrl("js/easyxdm.swf"):"",props:{style:this.extend({margin:0,padding:0,background:"#fff",border:0,position:"absolute",left:0,top:0,overflow:"hidden",width:"100%",height:"100%"},d),frameBorder:"0"},container:c,onMessage:function(b){var c,d;(c=b.match(/(.*?)\((.*?)\)/))&&(d=c[1],b=c[2]),/^https?:\/\//.test(b)?location.href=b:-1<uLogin.inArray(b,uLogin.states)?uLogin._changeState(e,b):"closeme"==b?(uLogin.hideAll(),f.destroy()):/to_window:/.test(b)?(b=uLogin.buildUrl(b.replace(/to_window:\/?/,"",""),{set:encodeURIComponent("{window:1}")}),uLogin.loadWindow(b)):/weights:/.test(b)?uLogin.setWeights(b.replace(/weights:\/?/,"","")):uLogin.ids[e]&&"undefined"!=typeof a[uLogin.ids[e].callback]?(uLogin._changeState(e,"receive"),a[uLogin.ids[e].callback](b),uLogin.dialog&&uLogin.hideAll()):d&&"undefined"!=typeof a[d]&&(a[d].apply(a,b.split(",")),f.destroy(),uLogin.dialog&&uLogin.hideAll())}});return f},getWidgetNumber:function(a){for(var b=0;b<this.ids.length;b++)if(a==this.ids[b].id)return b;return 0/0},onMoveWindow:function(){this.moveWindow()},loadWindow:function(c,d){null===d&&(d=!1);var f,e=this.ids[d]?this.ids[d].opacity:75;try{b.body.removeChild(this.lightbox)}catch(g){}try{b.body.removeChild(this.dialog)}catch(h){}try{b.body.removeChild(this.close)}catch(i){}f=b.createElement("div"),this.resetStyle(f,{position:"fixed",zIndex:9997,width:"100%",height:"100%",background:"#"+(this.ids[d]?this.ids[d].color:"fff"),display:"none"}),this.setOpacity(f,e),this.lightbox=f,f=b.createElement("div"),f.id=this.genID(),this.resetStyle(f,{position:"absolute",zIndex:9998,left:Math.floor(this.scrollLeft()+(this.clientWidth()-this.dialogWidth())/2),top:Math.floor(this.scrollTop()+(this.clientHeight()-this.dialogHeight())/2),width:this.dialogWidth(),height:this.dialogHeight(),overflow:"hidden",display:"none",border:"10px solid #666",borderRadius:"8px"}),this.dialog=f,f=b.createElement("img"),f.src=this.buildUrl("img/blank.gif"),this.resetStyle(f,{position:"absolute",height:30,zIndex:9999,background:"url("+this.buildUrl("img/x.png")+")",cursor:"pointer",display:"none",left:Math.floor(this.scrollLeft()+(this.clientWidth()+562)/2),top:Math.floor(this.scrollTop()+(this.clientHeight()-374)/2)}),this.close=f,b.body.appendChild(this.lightbox),b.body.appendChild(this.dialog),b.body.appendChild(this.close),this.add(this.lightbox,"click",function(){uLogin.hideAll()}),this.add(this.close,"click",function(){uLogin.hideAll()}),this.add(this.close,"mouseover",function(a){a.style.background="url("+uLogin.buildUrl("img/x_.png")+")"}),this.add(this.close,"mouseout",function(a){a.style.background="url("+uLogin.buildUrl("img/x.png")+")"}),this.add(a,"scroll",function(){uLogin.onMoveWindow()}),this.add(a,"resize",function(){uLogin.onMoveWindow()}),this.newDialogSocket(this.initSocket(c,this.dialog.getAttribute("id"),{},d)),this.show(this.close),this.show(this.lightbox),this.show(this.dialog),this.onMoveWindow()},hideAll:function(){this.hide(this.lightbox),this.hide(this.dialog),this.hide(this.close);for(var a=0;a<this.ids.length;a++)this.ids[a].showed=!1,this.hide(this.ids[a].hiddenW),this.hide(this.ids[a].hiddenA)},moveWindow:function(){if(!this.dialog||!this.dialog.firstChild)return!1;for(var a=this.dialogWidth(),b=this.dialogHeight(),a=(Math.floor(this.scrollLeft()+(this.clientWidth()-a)/2)-Number(this.dialog.style.left.slice(0,-2)))/10,b=(Math.floor(this.scrollTop()+(this.clientHeight()-b)/2)-Number(this.dialog.style.top.slice(0,-2)))/10,c=(Math.floor(this.scrollLeft()+(this.clientWidth()+562)/2)-Number(this.close.style.left.slice(0,-2)))/10,d=(Math.floor(this.scrollTop()+(this.clientHeight()-374)/2)-Number(this.close.style.top.slice(0,-2)))/10,e=0;10>e;e++)this.dialog.style.left=a+Number(this.dialog.style.left.slice(0,-2))+"px",this.dialog.style.top=b+Number(this.dialog.style.top.slice(0,-2))+"px",this.close.style.left=c+Number(this.close.style.left.slice(0,-2))+"px",this.close.style.top=d+Number(this.close.style.top.slice(0,-2))+"px"
},resetStyle:function(a,b){!b&&(b={});var f,c=this.extend({margin:0,padding:0,outline:"none",border:"none",borderRadius:0,cursor:"default","float":"none",position:"relative",display:"inherit",width:"auto",height:"auto",left:0,top:0,boxSizing:"content-box"},b),d=["width","height","left","top"],e=["float"];for(f in c){-1<this.inArray(f,d)&&"number"==typeof c[f]&&(c[f]+="px");try{-1<this.inArray(f,e)&&a.style.setProperty(f,c[f])}catch(g){}try{a.style[f]=c[f]}catch(h){}}},getIconPosition:function(a,b){return b+=b>8?1:0,a?"0 -"+(19+23*b)+"px":"0 -"+(3+35*(b+1))+"px"},setOpacity:function(a,b){a.style.filter=b?"alpha(opacity="+b+") progid:DXImageTransform.Microsoft.AlphaImageLoader(src=transparent.png, sizingMethod='crop')":"",a.style.opacity=b?parseFloat(b)/100:""},initDrop:function(a){if(!this.ids[a].mobile&&""!=this.ids[a].hidden){var c,d,e=this.get(this.ids[a].id),f=this.genID();d=310<23*this.ids[a].hidden.split(",").length-2?310:23*this.ids[a].hidden.split(",").length-2,c=b.createElement("div"),c.id=f,this.resetStyle(c,{position:"absolute",zIndex:9999,width:128,height:d,border:"5px solid #666",borderRadius:"4px",display:"none"}),this.ids[a].hiddenW=c,e.appendChild(this.ids[a].hiddenW),c=this.buildUrl("drop.html",{id:a,redirect_uri:this.ids[a].redirect_uri,callback:this.ids[a].callback,providers:this.ids[a].hidden,fields:this.ids[a].fields,optional:this.ids[a].optional,othprov:this.ids[a].providers,protocol:this.protocol,host:this.host,lang:this.ids[a].lang,verify:this.ids[a].verify,sort:this.ids[a].sort,altway:this.ids[a].altway?1:null}),this.initSocket(c,f,{position:"relative",width:"128px",height:d+"px"},a),c=b.createElement("div"),this.resetStyle(c,{position:"absolute",background:"#000",left:82,top:"100%",width:41,height:13,border:"5px solid #666",textAlign:"center"}),d=b.createElement("a"),d.href=this.buildUrl(""),d.target="_blank",this.resetStyle(d,{width:41,height:13,background:"url("+this.buildUrl("img/text.png")+") no-repeat"}),c.appendChild(d),this.ids[a].hiddenW.appendChild(c),c=b.createElement("img"),c.src=this.buildUrl("img/link.png"),this.resetStyle(c,{width:8,height:4,position:"absolute",zIndex:9999,display:"none"}),this.ids[a].hiddenA=c,e.appendChild(this.ids[a].hiddenA),this.ids[a].showed=!1,this.add(b.body,"click",function(a,b){b.target||(b.target=b.srcElement);for(var c=0;c<uLogin.ids.length;c++)b.target!=uLogin.ids[c].drop&&(uLogin.hide(uLogin.ids[c].hiddenW),uLogin.hide(uLogin.ids[c].hiddenA))}),this.ids[a].hiddenW&&this.ids[a].hiddenA&&(this.add(this.ids[a].hiddenW,"mouseout",function(){uLogin.dropdownDelayed(a,0)}),this.add(this.ids[a].hiddenA,"mouseout",function(){uLogin.dropdownDelayed(a,0)}),this.add(this.ids[a].hiddenW,"mouseover",function(){uLogin.clearDropTimer(a)}),this.add(this.ids[a].hiddenA,"mouseover",function(){uLogin.clearDropTimer(a)}))}},showDrop:function(a,b){if(this.ids[a].hiddenW||this.ids[a].hiddenA)if(this.ids[a].showed||0==b)this.hide(this.ids[a].hiddenW),this.hide(this.ids[a].hiddenA),this.ids[a].showed=!1;else{this.show(this.ids[a].hiddenA),this.show(this.ids[a].hiddenW),this.ids[a].showed=!0;var c,d,e=this.ids[a].drop;c=0+e.offsetLeft,d=0+e.offsetTop,c-=e.scrollLeft,d-=e.scrollTop,this.ids[a].hiddenW.style.left=c-(1==b?100:106)+"px",this.ids[a].hiddenW.style.top=d+(1==b?21:37)+"px",this.ids[a].hiddenA.style.left=c+(1==b?4:12)+"px",this.ids[a].hiddenA.style.top=d+(1==b?17:33)+"px"}},clearDropTimer:function(b){this.ids[b].dropTimer&&a.clearTimeout(this.ids[b].dropTimer)},dropdown:function(a,b){this.clearDropTimer(a),this.showDrop(a,b)},dropdownDelayed:function(a,b){this.clearDropTimer(a),this.ids[a].dropTimer=d(function(){uLogin.showDrop(a,b)},600)},initButtons:function(a){var b=this.get(this.ids[a].id);this.ids[a].mobile&&this.add(this.get(this.ids[a].id),"click",function(b,c){c.preventDefault?c.preventDefault():c.returnValue=!1;var d=uLogin.buildUrl("mobile.html",{id:uLogin.ids[a].id,redirect_uri:uLogin.ids[a].redirect_uri,callback:uLogin.ids[a].callback,fields:uLogin.ids[a].fields,optional:uLogin.ids[a].optional,protocol:uLogin.ids[a].protocol,host:uLogin.ids[a].host,lang:uLogin.ids[a].lang,verify:uLogin.ids[a].verify,providers:uLogin.ids[a].providers,hidden:uLogin.ids[a].hidden});return uLogin.openWithReceiver(d,a),!1}),"window"===this.ids[a].type?this._proceedChildren(b,this._(this._initButton),a):(this.ids[a].providers="",this._proceedChildren(b,this._(this._initButton),a),this.ids[a].providers=this.ids[a].providers.slice(0,this.ids[a].providers.length-1)),this._changeState(a,this.states[0])},_:function(a){return function(){a.apply(uLogin,arguments)}},_proceedChildren:function(a,b,c){a=a.childNodes;var d,e;for(e=0;e<a.length;e++){var f=a[e];f.getAttribute&&(b(f,c),(d=f.getAttribute("data-uloginbutton")||f.getAttribute("x-ulogin-button"))&&-1<this.inArray(d,this.providerCodes)&&!new RegExp(d+"(,|$)","i").test(this.ids[c].providers)&&(this.ids[c].providers+=d+",")),this._proceedChildren(f,b,c)}},_initButton:function(a,b){var c=a.getAttribute("data-uloginbutton")||a.getAttribute("x-ulogin-button");if(c)if(-1<this.inArray(c,this.providerCodes))this.add(a,"mouseover",function(a){return/disabled/.test(a.className)?!1:(uLogin.setOpacity(a,parseFloat(uLogin.ids[b].opacity)),void 0)}),this.add(a,"mouseout",function(a){return/disabled/.test(a.className)?!1:(uLogin.setOpacity(a),void 0)}),this.ids[b].mobile||this.add(a,"click",function(a){return/disabled/.test(a.className)?!1:(a=a.getAttribute("data-uloginbutton")||a.getAttribute("x-ulogin-button"),uLogin.startAuth(a,"",b),void 0)});else if("window"===c&&(this.ids[b].mobile||this.add(a,"click",function(a,c){if(c.preventDefault?c.preventDefault():c.returnValue=!1,/disabled/.test(a.className))return!1;var d=uLogin.buildUrl(uLogin.ids[b].mobile?"mobile.html":"window.html",{id:b,redirect_uri:uLogin.ids[b].redirect_uri,callback:uLogin.ids[b].callback,fields:uLogin.ids[b].fields,optional:uLogin.ids[b].optional,protocol:uLogin.protocol,host:uLogin.host,lang:uLogin.ids[b].lang,verify:uLogin.ids[b].verify,sort:uLogin.ids[b].sort,othprov:uLogin.ids[b].hidden,providers:uLogin.ids[b].providers,altway:uLogin.ids[b].altway?1:null});return uLogin.loadWindow(d,b),!1}),a.getAttribute("data-ulogin-default"))){var d=this.buildUrl("img/"+("ru"==this.ids[b].lang?"":this.ids[b].lang+"/")+"button.png"),e=this.buildUrl("img/"+("ru"==this.ids[b].lang?"":this.ids[b].lang+"/")+"button_.png");a.src=d,this.resetStyle(a,{cursor:"pointer"}),this.add(a,"mouseover",function(a){return/disabled/.test(a.parentNode.className)?!1:(a.src!=e&&(a.src=e),void 0)}),this.add(a,"mouseout",function(a){return/disabled/.test(a.parentNode.className)?!1:(a.src!=d&&(a.src=d),void 0)})}},sendWeight:function(a){this.initSocket(this.buildUrl("weight_set.html",{provider:a,r:parseInt(1e5*Math.random())}),this.getRC(),{background:"transparent"})},setWeights:function(a){this.supportStorage&&(localStorage.providers_weight=a)},getWeights:function(){try{return JSON.parse(localStorage.providers_weight)}catch(a){return{}}},relProviders:function(a,b,c){if(a=a.split(","),b=b.split(","),this.supportStorage){var e,d=this.getWeights();for(e in d){var d=this.inArray(e,a),f=this.inArray(e,b);-1!==d?(a.splice(d,1),a.splice(0,0,e)):-1!==f&&(a.splice(0,0,e),b.splice(f,1),b.splice(0,0,a[a.length-1]),a.splice(a.length-1,1))}}return 1===c?a:b},startAuth:function(a,b,c){var d={name:a,window:1,lang:this.ids[c].lang,fields:this.ids[c].fields,host:this.host,optional:this.ids[c].optional,redirect_uri:this.ids[c].redirect_uri||location.href,verify:this.ids[c].verify,callback:this.ids[c].callback,screen:screen.width+"x"+screen.height,url:b,providers:this.ids[c].providers,hidden:this.ids[c].hidden};this.ids[c].altway&&(d.altway=1),a=b||"webmoney"!=a&&"livejournal"!=a&&"openid"!=a?this.buildUrl("auth.php",d):this.buildUrl("url.php",d),this._changeState(c,this.states[1]),this.ids[c].altway?location.href=a:this.openWithReceiver(a,c)},openWithReceiver:function(a,b){!b&&(b=0),this.initSocket(this.buildUrl("buttons_receiver.html",{four:encodeURIComponent(a),r:parseInt(1e5*Math.random())}),this.getRC(),{background:"transparent"},b);var c=660,d=420;/name=vkontakte/.test(a)?d=380:/name=facebook/.test(a)?(c=560,d=350):/name=google/.test(a)?(c=800,d=630):/name=yandex/.test(a)&&(c=990,d=530);var e=this.getRC().getElementsByTagName("iframe"),c=e[e.length-1].contentWindow.open(a,"uw","width="+c+",height="+d+",left="+(screen.width-c)/2+",top="+(screen.height-d)/2);this.checkWindow(c,b)},checkWindow:function(){},checkCurrentWidgets:function(){for(var a=0;this.ids[a];)this.checkWidget(this.ids[a++].id)},checkWidget:function(a){var b=this.get(a);if(b)if(this.inited(a)){a=this.getWidgetNumber(a);var c=this.ids[a].type;if(("small"===c||"panel"===c)&&!b.childNodes.length)return b=this.ids[a].id,uLogin.ids[a].id=!1,uLogin.initWidget(b),!0;b.getAttribute("data-ulogin-inited")||(b=this.ids[a].id,uLogin.ids[a].id=!1,uLogin.initWidget(b))}else this.addWidget(this.get(a));else this.ids[this.getWidgetNumber(a)].id=!1},buildUrl:function(a,b){b||(b={}),a="https://"+this.uLoginHost+"/"+a;var d,c="";for(d in b){var e=b[d];null!==e&&((/\?/.test(e)||/\//.test(e)||/:/.test(e))&&(e=""),c+=d+"="+e+"&")}return 0<c.length&&(c=c.substring(0,c.length-1),a=a+(/\?/.test(a)?"&":"?")+c),a},getWidget:function(a,c){if(this.inited(c)||this.waitGetWidget[a]&&-1!==this.inArray(c,this.waitGetWidget[a]))return!1;if(this.waitGetWidget[a]||(this.waitGetWidget[a]=[]),this.waitGetWidget[a].push(c),this.widgetSettings[a])this.setProp(c,this.ids.length,this.widgetSettings[a]);else{var d=this.getRC(),e=b.createElement("script");e.async=!0,e.src=this.buildUrl("getwidget",{widgetid:a}),d.appendChild(e)}},forElements:function(a,b){if(a&&a.length)for(var c in a)b(a[c])},setWidget:function(a,c,d){return!d&&c&&(d=c),"not_found"===a?(this.forElements(this.waitGetWidget[a],function(a){b.getElementById(a).setAttribute("data-uloginid","")}),!1):(d&&!uLogin.widgetSettings[a]&&"undefined"!=typeof d.display&&(this.forElements(this.waitGetWidget[a],function(a){if("window"==d.display){var c=b.createElement("img");c.setAttribute("src",uLogin.buildUrl("img/button.png")),c.setAttribute("style","cursor:pointer; width:187px; height:30px"),c.setAttribute("alt","\u041c\u0443\u043b\u044c\u0442\u0438\u0412\u0445\u043e\u0434"),b.getElementById(a).appendChild(c)}var e,c=uLogin.parse(b.getElementById(a).getAttribute("data-ulogin"));for(e in c)d[e]=c[e];uLogin.setProp(a,uLogin.ids.length,d)}),uLogin.widgetSettings[a]=d),void 0)},customInit:function(){for(var a=0;a<arguments.length;a++){if(!uLogin.get(arguments[a])||!arguments[a])return console.error('uLogin ERROR (customInit): Element with ID="'+arguments[a]+'" not found'),!1;uLogin.checkWidget(arguments[a])}},checkAsyncWidgets:function(){var a=this.get("ulogin")||this.get("uLogin");a&&a.id&&this.addWidget(a)},setStateListener:function(a,b,c){return this.listeners[a]||(this.listeners[a]={}),this.listeners[a][b]||(this.listeners[a][b]=[]),this.listeners[a][b].push(c)-1},removeStateListener:function(a,b,c){return this.listeners[a]&&this.listeners[a][c]?this.listeners[a][c].splice(b,1):!1},_changeState:function(a,b){try{this.ids[a].state=b;for(var c=0;this.listeners[this.ids[a].id][b][c];)this.listeners[this.ids[a].id][b][c++]()}catch(d){}},extend:function(a,b){for(var c in b)a[c]=b[c];return a}},-1==uLogin.inArray(uLogin.lang,uLogin.langs)&&(uLogin.lang=uLogin.langs[0]),uLogin.init("undefined"!=typeof uLogin_query?uLogin_query:"")),a.receiver=function(b,c){a[c](b)},a.redirect=function(a,c){var d=b.createElement("form");d.action=c,d.method="post",d.target="_top",d.style.display="none";var e=b.createElement("input");e.type="hidden",e.name="token",e.value=a,d.appendChild(e),b.body.appendChild(d),d.submit()}}(window,document,navigator,setTimeout);